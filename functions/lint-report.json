[{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\config\\firebase.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\controllers\\agents\\getAgentById.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[483,486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[483,486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":20,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":20,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":27,"column":64,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":27,"endColumn":71},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":18,"suggestions":[{"fix":{"range":[1450,1493],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Controller: Get Agent By ID\n * Obtiene un agente espec├¡fico por su ID con todas sus subcolecciones\n */\n\nimport type { Request } from \"firebase-functions/v2/https\";\nimport type { Response } from \"express\";\nimport { db } from \"../../config/firebase.config.js\";\nimport { success, error, notFound } from \"../../utils/http/response.js\";\n\n/**\n * Obtiene un agente por ID desde agent_configurations\n */\nexport const getAgentById = async (\n  req: Request,\n  res: Response,\n): Promise<any> => {\n  try {\n    // Obtener ID del body (ahora es POST)\n    const { id: agentId } = req.body;\n\n    if (!agentId) {\n      return error(res, \"Agent ID is required\", 400);\n    }\n\n    // Obtener agente de la colecci├│n agent_configurations\n    const agentRef = db.collection(\"agent_configurations\").doc(agentId);\n    const agentDoc = await agentRef.get();\n\n    if (!agentDoc.exists) {\n      return notFound(res, \"Agent\");\n    }\n\n    // Obtener todos los campos del agente\n    const agentData = agentDoc.data();\n\n    // Obtener todas las subcolecciones del agente din├ímicamente\n    const collections = await agentRef.listCollections();\n    const collectionNames = collections.map((col) => col.id);\n\n    // Construir respuesta con tipo Agent\n    const agent = {\n      id: agentDoc.id,\n      ...agentData,\n      collections: collectionNames,\n    };\n\n    // Retornar agente con sus campos y nombres de subcolecciones\n    return success(res, agent);\n  } catch (err) {\n    console.error(\"Error getting agent:\", err);\n\n    const errorMessage = err instanceof Error ? err.message : \"Unknown error\";\n    return error(res, \"Failed to get agent\", 500, errorMessage);\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\controllers\\agents\\getAgentsByUserId.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[499,502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[499,502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":20,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":20,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":29,"column":12,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":29,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":18,"suggestions":[{"fix":{"range":[1229,1284],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Controller: Get Agents By User ID\n * Obtiene todos los agentes de un usuario\n */\n\nimport type { Request } from \"firebase-functions/v2/https\";\nimport type { Response } from \"express\";\nimport { db } from \"../../config/firebase.config.js\";\nimport { success, error, notFound } from \"../../utils/http/response.js\";\n\n/**\n * Obtiene un los agentes de un usuario por ID desde /usersBuilders/userUID/agentDrafts\n */\nexport const getAgentsByUserId = async (\n  req: Request,\n  res: Response,\n): Promise<any> => {\n  try {\n    // Obtener ID del body (ahora es POST)\n    const { id: userId } = req.body;\n\n    if (!userId) {\n      return error(res, \"User ID is required\", 400);\n    }\n\n    //obtener la coleccion agentDrafts del usuario\n    const agentDraftsRef = db\n      .collection(\"usersBuilders\")\n      .doc(userId)\n      .collection(\"agentDrafts\");\n    const agentDraftsSnapshot = await agentDraftsRef.get();\n\n    if (agentDraftsSnapshot.empty) {\n      return notFound(res, \"Agent drafts not found\");\n    }\n\n    //mapear los documentos a un array con todos sus campos\n    const agents = agentDraftsSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n\n    return success(res, agents);\n  } catch (err) {\n    console.error(\"Error getting agents by user ID:\", err);\n    const errorMessage =\n      err instanceof Error ? err.message : \"Unknown error occurred\";\n    return error(res, \"Failed to get agent\", 500, errorMessage);\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\controllers\\agents\\getCollectionByAgentId.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":14,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":14,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":17,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":17,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":21,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":21,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":25,"column":64,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":25,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":29,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":29,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":33,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":33,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":37,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":37,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":41,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":47,"endColumn":8},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":18,"suggestions":[{"fix":{"range":[1592,1638],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":2,"message":"Unsafe return of a value of type `any`.","line":52,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":52,"endColumn":68}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Controller: Get Collection By Document ID\n * Obtiene la informacion de una subcoleccion de un agente\n * se usara repetidamente para obtener las subcolecciones de un documento para un panel web iterable\n */\nimport type { Request } from \"firebase-functions/v2/https\";\nimport type { Response } from \"express\";\nimport { db } from \"../../config/firebase.config.js\";\nimport { success, error, notFound } from \"../../utils/http/response.js\";\n\nexport const getCollectionByAgentId = async (req: Request, res: Response) => {\n  try {\n    // Obtener par├ímetros del body (ahora es POST)\n    const { agentId, collection: collectionName } = req.body;\n\n    if (!agentId) {\n      return error(res, \"Agent ID is required\", 400);\n    }\n\n    if (!collectionName) {\n      return error(res, \"Collection name is required\", 400);\n    }\n\n    // Obtener documento de la colecci├│n agent_configurations\n    const agentRef = db.collection(\"agent_configurations\").doc(agentId);\n    const agentDoc = await agentRef.get();\n\n    if (!agentDoc.exists) {\n      return notFound(res, \"Agent\");\n    }\n\n    // Obtener la subcoleccio de agente din├ímicamente\n    const collectionRef = agentRef.collection(collectionName);\n    const collectionSnapshot = await collectionRef.get();\n\n    if (collectionSnapshot.empty) {\n      return notFound(res, \"Collection not found\");\n    }\n\n    // Retornar documento con sus campos y nombres de subcolecciones\n    return success(res, {\n      id: agentDoc.id,\n      ...collectionSnapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      })),\n    });\n  } catch (err) {\n    console.error(\"Error getting document:\", err);\n    const errorMessage =\n      err instanceof Error ? err.message : \"Unknown error occurred\";\n    return error(res, \"Failed to get document\", 500, errorMessage);\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\controllers\\agents\\getMessagesByChatId.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[440,443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[440,443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":2,"message":"Unsafe assignment of an `any` value.","line":17,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":22,"endColumn":17},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":33,"column":50,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":33,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":38,"column":12,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":38,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":40,"column":46,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":40,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":46,"column":34,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":46,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":63,"column":52,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":63,"endColumn":65},{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"A method that is not declared with `this: void` may cause unintentional scoping of `this` when separated from its object.\nConsider using an arrow function or explicitly `.bind()`ing the method to avoid calling the method with an unintended `this` value. \nIf a function does not access `this`, it can be annotated with `this: void`.","line":80,"column":12,"nodeType":"MemberExpression","messageId":"unboundWithoutThisAnnotation","endLine":80,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":105,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":105,"endColumn":18,"suggestions":[{"fix":{"range":[3022,3079],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Controller: Get Messages By Chat ID\n * Obtiene todos los mensajes de un chat dentro de un agente con paginaci├│n\n */\n\nimport type { Request } from \"firebase-functions/v2/https\";\nimport type { Response } from \"express\";\nimport { db } from \"../../config/firebase.config.js\";\nimport { success, error, notFound } from \"../../utils/http/response.js\";\n\nexport const getMessagesByChatId = async (\n  req: Request,\n  res: Response,\n): Promise<any> => {\n  try {\n    // Obtener par├ímetros del body\n    const {\n      chatId,\n      agentId,\n      limit = 20, // L├¡mite de mensajes por p├ígina (default: 20)\n      lastMessageId = null, // ID del ├║ltimo mensaje de la p├ígina anterior (para cursor)\n    } = req.body;\n\n    if (!chatId) {\n      return error(res, \"Chat ID is required\", 400);\n    }\n\n    if (!agentId) {\n      return error(res, \"Agent ID is required\", 400);\n    }\n\n    // Validar que limit sea un n├║mero v├ílido\n    const pageLimit = Math.min(Math.max(parseInt(limit) || 50, 1), 100); // Entre 1 y 100\n\n    // Obtener la colecci├│n de chats del agente\n    const agentRef = db\n      .collection(\"agent_configurations\")\n      .doc(agentId)\n      .collection(\"chats\");\n    const agentSnapshot = await agentRef.doc(chatId).get();\n\n    if (!agentSnapshot.exists) {\n      return notFound(res, \"Chat not found\");\n    }\n\n    const chatRef = agentRef.doc(chatId);\n    const chatSnapshot = await chatRef.get();\n\n    if (!chatSnapshot.exists) {\n      return notFound(res, \"Chat not found\");\n    }\n\n    // Referencia a la colecci├│n de mensajes\n    const messagesRef = chatRef.collection(\"messages\");\n\n    // Construir query con paginaci├│n\n    let query = messagesRef\n      .orderBy(\"createdAt\", \"desc\") // Ordenar por timestamp descendente (m├ís recientes primero)\n      .limit(pageLimit + 1); // +1 para saber si hay m├ís p├íginas\n\n    // Si hay un cursor (lastMessageId), empezar despu├®s de ese mensaje\n    if (lastMessageId) {\n      const lastMessageDoc = await messagesRef.doc(lastMessageId).get();\n\n      if (lastMessageDoc.exists) {\n        query = query.startAfter(lastMessageDoc);\n      }\n    }\n\n    // Ejecutar query\n    const messagesSnapshot = await query.get();\n\n    if (messagesSnapshot.empty && !lastMessageId) {\n      // Si es la primera p├ígina y no hay mensajes\n      return success(res, {\n        messages: [],\n        hasMore: false,\n        total: 0,\n        limit: pageLimit,\n        ...chatSnapshot.data,\n      });\n    }\n\n    // Extraer mensajes\n    const messages = messagesSnapshot.docs.slice(0, pageLimit).map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n\n    // Verificar si hay m├ís p├íginas\n    const hasMore = messagesSnapshot.docs.length > pageLimit;\n\n    // Obtener el ID del ├║ltimo mensaje para el siguiente cursor\n    const lastMessage =\n      messages.length > 0 ? messages[messages.length - 1] : null;\n\n    return success(res, {\n      messages,\n      hasMore,\n      lastMessageId: lastMessage?.id || null,\n      limit: pageLimit,\n      count: messages.length,\n    });\n  } catch (err) {\n    console.error(\"Error getting messages by chat ID:\", err);\n    const errorMessage =\n      err instanceof Error ? err.message : \"Unknown error occurred\";\n    return error(res, \"Failed to get messages\", 500, errorMessage);\n  }\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\middlewares\\cors.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\middlewares\\cors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\routes\\agents.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":22,"column":25,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":22,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[782,785],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[782,785],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":23,"column":29,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":23,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":36,"column":25,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":36,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1078,1081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1078,1081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":37,"column":34,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":37,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1124,1127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1124,1127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":50,"column":25,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":50,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1389,1392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1389,1392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":51,"column":39,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":51,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1440,1443],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1440,1443],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":60,"column":25,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":60,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1595,1598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1595,1598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":2,"message":"Unsafe argument of type `any` assigned to a parameter of type `Response<any, Record<string, any>>`.","line":61,"column":36,"nodeType":"TSAsExpression","messageId":"unsafeArgument","endLine":61,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1643,1646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1643,1646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Routes: Agents\n * Define las Cloud Functions HTTP para operaciones de agentes\n */\n\nimport { onRequest } from \"firebase-functions/v2/https\";\nimport { corsMiddleware } from \"../middlewares/cors.js\";\nimport { getAgentById } from \"../controllers/agents/getAgentById.js\";\nimport { getAgentsByUserId } from \"../controllers/agents/getAgentsByUserId.js\";\nimport { getCollectionByAgentId } from \"../controllers/agents/getCollectionByAgentId.js\";\nimport { getMessagesByChatId } from \"../controllers/agents/getMessagesByChatId.js\";\n// import { updateAgent } from '../controllers/agents/updateAgent.js';\n\n/**\n * Cloud Function: Obtener agente por ID\n */\nexport const kaiSaas_agent_getAgentById = onRequest(\n  {\n    cors: true,\n  },\n  async (req, res) => {\n    corsMiddleware(req, res as any);\n    await getAgentById(req, res as any);\n  },\n);\n\n/**\n * Cloud Function: Obtener agentes por User ID\n * TODO: Migrar getAgentsByUserId a TypeScript\n */\nexport const kaiSaas_agent_getAgentsByUserId = onRequest(\n  {\n    cors: true,\n  },\n  async (req, res) => {\n    corsMiddleware(req, res as any);\n    await getAgentsByUserId(req, res as any);\n  },\n);\n\n/**\n * Cloud Function: Obtener colecci├│n de agente\n * TODO: Migrar getCollectionByAgentId a TypeScript\n */\nexport const kaiSaas_agent_getCollectionByAgentId = onRequest(\n  {\n    cors: true,\n  },\n  async (req, res) => {\n    corsMiddleware(req, res as any);\n    await getCollectionByAgentId(req, res as any);\n  },\n);\n\nexport const kaiSaas_agent_getMessagesByChatId = onRequest(\n  {\n    cors: true,\n  },\n  async (req, res) => {\n    corsMiddleware(req, res as any);\n    await getMessagesByChatId(req, res as any);\n  },\n);\n/**\n * Cloud Function: Actualizar agente\n * TODO: Migrar updateAgent a TypeScript\n */\n// export const kaiSaas_agent_updateAgent = onRequest(\n//   {\n//     cors: true,\n//   },\n//   async (req, res) => {\n//     corsMiddleware(req, res);\n//     await updateAgent(req, res);\n//   }\n// );\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[126,129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[126,129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[657,660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[657,660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Response } from \"express\";\n\n/**\n * Estructura est├índar de respuesta de API\n */\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  error?: {\n    message: string;\n    code: number;\n    details?: string;\n    validationErrors?: ValidationError[];\n  };\n  timestamp: string;\n}\n\n/**\n * Error de validaci├│n de campos\n */\nexport interface ValidationError {\n  field: string;\n  message: string;\n}\n\n/**\n * Agente de IA\n */\nexport interface Agent {\n  id: string;\n  name: string;\n  description?: string;\n  status: \"active\" | \"inactive\" | \"draft\";\n  collections?: string[];\n  createdAt?: string;\n  updatedAt?: string;\n  [key: string]: any;\n}\n\n/**\n * Usuario del sistema\n */\nexport interface User {\n  uid: string;\n  email: string;\n  displayName?: string;\n  photoURL?: string;\n  phoneNumber?: string;\n  emailVerified: boolean;\n}\n\n/**\n * Type helper para Response de Firebase Functions\n */\nexport type HttpResponse = Response;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\utils\\http\\response.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\desga\\OneDrive\\Escritorio\\repositorio\\KAI-SAAS\\functions\\src\\utils\\http\\response.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[259,262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[259,262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":4,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":7,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[324,327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[324,327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":4,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":7,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[651,654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[651,654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":4,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":7,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1032,1035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1032,1035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1402,1405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1402,1405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Utilidades para Respuestas HTTP\n * Estandariza las respuestas de las APIs\n */\n\nimport type { Response } from \"express\";\nimport type { ApiResponse, ValidationError } from \"../../types/index.js\";\n\n/**\n * Respuesta exitosa\n */\nexport const success = <T = any>(\n  res: Response,\n  data: T,\n  statusCode: number = 200,\n): any => {\n  const response: ApiResponse<T> = {\n    success: true,\n    data,\n    timestamp: new Date().toISOString(),\n  };\n\n  return res.status(statusCode).json(response);\n};\n\n/**\n * Respuesta de error\n */\nexport const error = (\n  res: Response,\n  message: string,\n  statusCode: number = 500,\n  details: string | null = null,\n): any => {\n  const response: ApiResponse = {\n    success: false,\n    error: {\n      message,\n      code: statusCode,\n      ...(details && { details }),\n    },\n    timestamp: new Date().toISOString(),\n  };\n\n  return res.status(statusCode).json(response);\n};\n\n/**\n * Respuesta de validaci├│n fallida\n */\nexport const validationError = (\n  res: Response,\n  errors: ValidationError[],\n): any => {\n  const response: ApiResponse = {\n    success: false,\n    error: {\n      message: \"Validation failed\",\n      code: 400,\n      validationErrors: errors,\n    },\n    timestamp: new Date().toISOString(),\n  };\n\n  return res.status(400).json(response);\n};\n\n/**\n * Respuesta de no encontrado\n */\nexport const notFound = (res: Response, resource: string = \"Resource\"): any => {\n  return error(res, `${resource} not found`, 404);\n};\n","usedDeprecatedRules":[]}]
